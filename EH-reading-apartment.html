<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Finding an Apartment - Reading Adventures</title>
		<!-- Common CSS -->
		<link rel="stylesheet" href="styles/common.css">
		<style>
			/* Reset and Base Styles */
			* {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
			}
			body {
            background: linear-gradient(135deg, #667eea, #764ba2);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 20px;
			}
			/* Apartment Lesson Specific Styles */
			.EH-apartment-container {
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            flex: 1;
            display: flex;
            flex-direction: column;
			}
			.EH-apartment-content {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            margin-bottom: 30px;
			}
			.EH-apartment-section {
            margin-bottom: 40px;
            padding-bottom: 30px;
            border-bottom: 1px solid #e0e0e0;
			}
			.EH-apartment-section-title {
            font-size: 1.8rem;
            color: #764ba2;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
			}
			/* Audio Player Styles */
			.EH-apartment-audio-player {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            text-align: center;
			}
			.EH-apartment-audio-title {
            font-size: 1.4rem;
            margin-bottom: 20px;
            color: #333;
			}
			.EH-apartment-audio-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
			}
			.EH-apartment-audio-btn {
            background: #667eea;
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: background 0.3s;
            font-size: 1.2rem;
            position: relative;
			}
			.EH-apartment-audio-btn:hover {
            background: #5a6fd8;
			}
			.EH-apartment-audio-btn:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: -40px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            white-space: nowrap;
            z-index: 10;
			}
			.EH-apartment-audio-btn.stop {
            background: #f093fb;
			}
			.EH-apartment-audio-btn.stop:hover {
            background: #ec7df9;
			}
			.EH-apartment-audio-btn.pause {
            background: #4ecdc4;
			}
			.EH-apartment-audio-btn.pause:hover {
            background: #3dbab4;
			}
			.EH-apartment-volume-container {
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
            margin-top: 10px;
			}
			.EH-apartment-volume-slider {
            width: 150px;
			}
			/* Story Content Styles */
			.EH-apartment-story {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            line-height: 1.6;
            color: #333;
			}
			.EH-apartment-story p {
            margin-bottom: 15px;
			}
			/* Comprehension Questions Styles */
			.EH-apartment-questions-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
			}
			.EH-apartment-question-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
			}
			.EH-apartment-question-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
			}
			.EH-apartment-question-number {
            display: inline-block;
            width: 35px;
            height: 35px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            margin-bottom: 15px;
			}
			.EH-apartment-question-text {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: #333;
			}
			.EH-apartment-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
			}
			.EH-apartment-option {
            display: flex;
            align-items: center;
            gap: 10px;
			}
			.EH-apartment-option input {
            cursor: pointer;
			}
			.EH-apartment-option label {
            cursor: pointer;
			}
			/* Vocabulary Cards Styles */
			.EH-apartment-vocabulary-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
			}
			.EH-apartment-vocabulary-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            display: flex;
            flex-direction: column;
			}
			.EH-apartment-vocabulary-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
			}
			.EH-apartment-vocabulary-word {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: #764ba2;
			}
			.EH-apartment-vocabulary-pronunciation {
            font-style: italic;
            color: #666;
            margin-bottom: 10px;
			}
			.EH-apartment-vocabulary-definition {
            margin-bottom: 15px;
            color: #333;
            flex: 1;
			}
			.EH-apartment-vocabulary-example {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 10px;
            font-style: italic;
            color: #555;
			}
			/* Pronunciation Practice Styles */
			.EH-apartment-pronunciation-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
			}
			.EH-apartment-pronunciation-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
			}
			.EH-apartment-pronunciation-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
			}
			.EH-apartment-pronunciation-number {
            display: inline-block;
            width: 35px;
            height: 35px;
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            margin-bottom: 15px;
			}
			.EH-apartment-pronunciation-text {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #333;
            text-align: center;
			}
			.EH-apartment-pronunciation-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
			}
			.EH-apartment-pronunciation-btn {
            background: #667eea;
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
			}
			.EH-apartment-pronunciation-btn:hover {
            background: #5a6fd8;
			}
			.EH-apartment-pronunciation-btn:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: -40px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            white-space: nowrap;
            z-index: 10;
			}
			.EH-apartment-pronunciation-btn.record {
            background: #f093fb;
			}
			.EH-apartment-pronunciation-btn.record:hover {
            background: #ec7df9;
			}
			.EH-apartment-pronunciation-btn.recording {
            background: #f5576c;
            animation: pulse 1.5s infinite;
			}
			@keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
			}
			.EH-apartment-pronunciation-btn.play-recorded {
            background: #4ecdc4;
			}
			.EH-apartment-pronunciation-btn.play-recorded:hover {
            background: #3dbab4;
			}
			/* Recording status indicator */
			.EH-apartment-recording-status {
            text-align: center;
            margin-top: 10px;
            font-size: 0.9rem;
            color: #666;
			}
			.EH-apartment-recording-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            background: #f5576c;
            border-radius: 50%;
            margin-right: 5px;
            animation: blink 1s infinite;
			}
			@keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
			}
			/* Navigation Buttons */
			.EH-apartment-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
			}
			.EH-apartment-nav-button {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 8px;
			}
			.EH-apartment-nav-button:hover {
            background: #5a6fd8;
			}
			.EH-apartment-nav-button.back {
            background: #f093fb;
			}
			.EH-apartment-nav-button.back:hover {
            background: #ec7df9;
			}
			/* Progress Slider Styles */
			.EH-apartment-progress-container {
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
            margin: 15px 0;
            width: 100%;
            flex-wrap: wrap;
			}
			.EH-apartment-progress-slider {
            flex: 1;
            min-width: 200px;
            max-width: 400px;
			}
			.EH-apartment-time-display {
            font-size: 0.9rem;
            color: #666;
            min-width: 80px;
            text-align: center;
			}
			/* Controls Row */
			.EH-apartment-controls-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            margin-top: 15px;
            flex-wrap: wrap;
			}
			.EH-apartment-control-group {
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;
            min-width: 150px;
            justify-content: center;
			}
			.EH-apartment-control-slider {
            width: 100px;
			}
			.EH-apartment-speed-value {
            font-size: 0.9rem;
            color: #666;
            min-width: 35px;
            text-align: center;
            font-weight: bold;
			}
			/* Unified Exercise Styles - EH-exercise-type1-possibilities3- prefix */
			.EH-exercise-type1-possibilities3-answers-control {
			display: flex;
			flex-direction: column;
			align-items: center;
			margin-top: 30px;
			gap: 20px;
			}
			.EH-exercise-type1-possibilities3-check-answers-btn {
			background: #667eea;
			color: white;
			border: none;
			padding: 12px 25px;
			border-radius: 20px;
			cursor: pointer;
			font-weight: bold;
			transition: background 0.3s;
			font-size: 1rem;
			}
			.EH-exercise-type1-possibilities3-check-answers-btn:hover {
			background: #5a6fd8;
			}
			.EH-exercise-type1-possibilities3-score-display {
			background: white;
			border-radius: 15px;
			padding: 20px;
			box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
			text-align: center;
			display: none;
			width: 100%;
			max-width: 500px;
			}
			.EH-exercise-type1-possibilities3-score-title {
			font-size: 1.4rem;
			margin-bottom: 15px;
			color: #764ba2;
			}
			.EH-exercise-type1-possibilities3-score-value {
			font-size: 2rem;
			font-weight: bold;
			color: #667eea;
			margin-bottom: 15px;
			}
			.EH-exercise-type1-possibilities3-score-feedback {
			font-size: 1.1rem;
			color: #333;
			margin-bottom: 15px;
			}
			.EH-exercise-type1-possibilities3-answer-status {
			margin-top: 10px;
			font-size: 0.9rem;
			padding: 5px 10px;
			border-radius: 5px;
			display: inline-block;
			}
			.EH-exercise-type1-possibilities3-correct-answer {
			background-color: #d4edda;
			color: #155724;
			border: 1px solid #c3e6cb;
			}
			.EH-exercise-type1-possibilities3-incorrect-answer {
			background-color: #f8d7da;
			color: #721c24;
			border: 1px solid #f5c6cb;
			}
			.EH-exercise-type1-possibilities3-option.correct {
			background-color: #d4edda;
			padding: 5px;
			border-radius: 5px;
			border: 1px solid #c3e6cb;
			}
			.EH-exercise-type1-possibilities3-option.incorrect {
			background-color: #f8d7da;
			padding: 5px;
			border-radius: 5px;
			border: 1px solid #f5c6cb;
			}
			/* Responsive Design */
			@media (max-width: 768px) {
            .EH-apartment-questions-container,
            .EH-apartment-vocabulary-container,
            .EH-apartment-pronunciation-container {
			grid-template-columns: 1fr;
            }
            .EH-apartment-navigation {
			flex-direction: column;
			gap: 15px;
            }
            .EH-apartment-nav-button {
			width: 100%;
			justify-content: center;
            }
            .EH-apartment-controls-row {
			flex-direction: column;
			gap: 15px;
            }
            .EH-apartment-control-group {
			min-width: 200px;
            }
            .EH-apartment-progress-container {
			flex-direction: column;
			gap: 8px;
            }
            .EH-apartment-progress-slider {
			min-width: 100%;
            }
			}
			@media (max-width: 480px) {
            .EH-apartment-content {
			padding: 20px;
            }
			}
		</style>
	</head>
	<body>
		<!-- Language Selector -->
		<div style="position: fixed; top: 20px; right: 20px; z-index: 1000;">
			<select id="language-selector" style="padding: 8px 12px; border-radius: 8px; border: 2px solid #fff; background: rgba(255,255,255,0.9); color: #333; font-weight: bold;">
				<option value="en">English</option>
				<option value="fr">Fran√ßais</option>
				<option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
			</select>
		</div>
		<div class="EH-site-header">
			<a href="index.html" class="EH-site-logo-link" data-i18n="common.mainPage" title="Main Page">
				<img src="assets/icons/icon-192x192.png" alt="English Hub Logo" class="EH-site-logo">
			</a>
			<span class="EH-site-name" data-i18n="common.siteName">English Hub</span>
		</div>
		<div class="EH-apartment-container">
			<!-- Common Header -->
			<header class="EH-common-header">
				<h1 class="EH-common-title" data-i18n="apartment.title">Finding an Apartment</h1>
				<p class="EH-common-subtitle" data-i18n="apartment.subtitle">Join Ahmed as he searches for his first apartment in a new city</p>
			</header>
			<div class="EH-apartment-content">
				<!-- Audio Player Section -->
				<div class="EH-apartment-section">
					<h2 class="EH-apartment-section-title" data-i18n="apartment.sections.listen">Listen to the Story</h2>
					<div class="EH-apartment-audio-player">
						<h3 class="EH-apartment-audio-title" data-i18n="apartment.audio.title">Ahmed's Apartment Search</h3>
						<div class="EH-apartment-audio-controls">
							<button class="EH-apartment-audio-btn" id="EH-apartment-play-btn" data-tooltip="Play">
								‚ñ∂
							</button>
							<button class="EH-apartment-audio-btn pause" id="EH-apartment-pause-btn" style="display: none;" data-tooltip="Pause">
								‚è∏
							</button>
							<button class="EH-apartment-audio-btn stop" id="EH-apartment-stop-btn" data-tooltip="Stop">
								‚èπ
							</button>
						</div>
						<!-- Progress Slider -->
						<div class="EH-apartment-progress-container">
							<span data-i18n="common.progress">Progress:</span>
							<input type="range" min="0" max="100" value="0" class="EH-apartment-progress-slider" id="EH-apartment-progress">
							<span class="EH-apartment-time-display" id="EH-apartment-time">0:00 / 0:00</span>
						</div>
						<!-- Control sliders container -->
						<div class="EH-apartment-controls-row">
							<!-- Volume Control -->
							<div class="EH-apartment-control-group">
								<span data-i18n="common.volume">Volume:</span>
								<input type="range" min="0" max="100" value="80" class="EH-apartment-control-slider" id="EH-apartment-volume">
							</div>
							<!-- Speed Control -->
							<div class="EH-apartment-control-group">
								<span data-i18n="common.speed">Speed:</span>
								<input type="range" min="50" max="200" value="100" class="EH-apartment-control-slider" id="EH-apartment-speed">
								<span class="EH-apartment-speed-value" id="EH-apartment-speed-value">1.0x</span>
							</div>
						</div>
						<div class="EH-apartment-recording-status" id="EH-apartment-audio-status" data-i18n="apartment.audio.status.loading">Loading audio...</div>
					</div>
				</div>
				<!-- Story Content Section -->
				<div class="EH-apartment-section">
					<h2 class="EH-apartment-section-title" data-i18n="apartment.sections.story">Story Text</h2>
					<div class="EH-apartment-story">
						<p data-i18n="apartment.story.p1">Ahmed had just started his new job in the city and needed to find an apartment quickly. He had been staying in a temporary hostel for two weeks, but it was expensive and he wanted his own space.</p>
						<p data-i18n="apartment.story.p2">He spent his first weekend looking at rental websites and making a list of apartments to visit. He knew he needed something close to public transportation and within his budget of $1200 per month.</p>
						<p data-i18n="apartment.story.p3">The first apartment he visited was in an old building downtown. The landlord showed him a small studio with a view of another building's wall. "The rent is $1100, plus utilities," the landlord said. Ahmed thanked him but decided to keep looking.</p>
						<p data-i18n="apartment.story.p4">The second apartment was in a newer building near the subway station. It had a modern kitchen and a small balcony. The rent was $1300, which was over his budget. Ahmed asked if the landlord would consider $1200, but he refused.</p>
						<p data-i18n="apartment.story.p5">Feeling discouraged, Ahmed almost settled for the first apartment he saw. But then his coworker Maria told him about a neighborhood website where people posted apartment listings directly.</p>
						<p data-i18n="apartment.story.p6">On the website, Ahmed found a perfect one-bedroom apartment in a quiet neighborhood. It was only three blocks from the subway and the rent was $1150 including utilities. He immediately called the number listed.</p>
						<p data-i18n="apartment.story.p7">The owner, Mrs. Chen, invited him to see the apartment that evening. She explained that she preferred renting to people who worked in the area. The apartment was clean, bright, and had everything Ahmed needed.</p>
						<p data-i18n="apartment.story.p8">Ahmed filled out the rental application that night. Two days later, Mrs. Chen called to say he was approved. He signed the lease agreement and moved in the following weekend, excited to finally have his own place in the city.</p>
					</div>
				</div>
				<!-- Comprehension Questions Section -->
				<div class="EH-apartment-section">
					<h2 class="EH-apartment-section-title" data-i18n="apartment.sections.questions">Comprehension Questions</h2>
					<div class="EH-apartment-questions-container">
						<!-- Question 1 -->
						<div class="EH-apartment-question-card">
							<div class="EH-apartment-question-number">1</div>
							<p class="EH-apartment-question-text" data-i18n="apartment.questions.q1">Where was Ahmed staying before he found his apartment?</p>
							<div class="EH-apartment-options">
								<div class="EH-apartment-option">
									<input type="radio" id="EH-exercise-type1-possibilities3-q1-a" name="EH-exercise-type1-possibilities3-q1" value="a">
									<label for="EH-exercise-type1-possibilities3-q1-a" data-i18n="apartment.questions.q1a">With a friend</label>
								</div>
								<div class="EH-apartment-option">
									<input type="radio" id="EH-exercise-type1-possibilities3-q1-b" name="EH-exercise-type1-possibilities3-q1" value="b">
									<label for="EH-exercise-type1-possibilities3-q1-b" data-i18n="apartment.questions.q1b">In a temporary hostel</label>
								</div>
								<div class="EH-apartment-option">
									<input type="radio" id="EH-exercise-type1-possibilities3-q1-c" name="EH-exercise-type1-possibilities3-q1" value="c">
									<label for="EH-exercise-type1-possibilities3-q1-c" data-i18n="apartment.questions.q1c">At a hotel</label>
								</div>
							</div>
							<div class="EH-exercise-type1-possibilities3-answer-status" id="EH-exercise-type1-possibilities3-q1-status"></div>
						</div>
						<!-- Question 2 -->
						<div class="EH-apartment-question-card">
							<div class="EH-apartment-question-number">2</div>
							<p class="EH-apartment-question-text" data-i18n="apartment.questions.q2">What was Ahmed's monthly budget for rent?</p>
							<div class="EH-apartment-options">
								<div class="EH-apartment-option">
									<input type="radio" id="EH-exercise-type1-possibilities3-q2-a" name="EH-exercise-type1-possibilities3-q2" value="a">
									<label for="EH-exercise-type1-possibilities3-q2-a" data-i18n="apartment.questions.q2a">$1000</label>
								</div>
								<div class="EH-apartment-option">
									<input type="radio" id="EH-exercise-type1-possibilities3-q2-b" name="EH-exercise-type1-possibilities3-q2" value="b">
									<label for="EH-exercise-type1-possibilities3-q2-b" data-i18n="apartment.questions.q2b">$1200</label>
								</div>
								<div class="EH-apartment-option">
									<input type="radio" id="EH-exercise-type1-possibilities3-q2-c" name="EH-exercise-type1-possibilities3-q2" value="c">
									<label for="EH-exercise-type1-possibilities3-q2-c" data-i18n="apartment.questions.q2c">$1300</label>
								</div>
							</div>
							<div class="EH-exercise-type1-possibilities3-answer-status" id="EH-exercise-type1-possibilities3-q2-status"></div>
						</div>
						<!-- Question 3 -->
						<div class="EH-apartment-question-card">
							<div class="EH-apartment-question-number">3</div>
							<p class="EH-apartment-question-text" data-i18n="apartment.questions.q3">What was wrong with the first apartment Ahmed visited?</p>
							<div class="EH-apartment-options">
								<div class="EH-apartment-option">
									<input type="radio" id="EH-exercise-type1-possibilities3-q3-a" name="EH-exercise-type1-possibilities3-q3" value="a">
									<label for="EH-exercise-type1-possibilities3-q3-a" data-i18n="apartment.questions.q3a">It was too expensive</label>
								</div>
								<div class="EH-apartment-option">
									<input type="radio" id="EH-exercise-type1-possibilities3-q3-b" name="EH-exercise-type1-possibilities3-q3" value="b">
									<label for="EH-exercise-type1-possibilities3-q3-b" data-i18n="apartment.questions.q3b">It had a view of another building's wall</label>
								</div>
								<div class="EH-apartment-option">
									<input type="radio" id="EH-exercise-type1-possibilities3-q3-c" name="EH-exercise-type1-possibilities3-q3" value="c">
									<label for="EH-exercise-type1-possibilities3-q3-c" data-i18n="apartment.questions.q3c">It was too far from public transportation</label>
								</div>
							</div>
							<div class="EH-exercise-type1-possibilities3-answer-status" id="EH-exercise-type1-possibilities3-q3-status"></div>
						</div>
						<!-- Question 4 -->
						<div class="EH-apartment-question-card">
							<div class="EH-apartment-question-number">4</div>
							<p class="EH-apartment-question-text" data-i18n="apartment.questions.q4">Who told Ahmed about the neighborhood website?</p>
							<div class="EH-apartment-options">
								<div class="EH-apartment-option">
									<input type="radio" id="EH-exercise-type1-possibilities3-q4-a" name="EH-exercise-type1-possibilities3-q4" value="a">
									<label for="EH-exercise-type1-possibilities3-q4-a" data-i18n="apartment.questions.q4a">His landlord</label>
								</div>
								<div class="EH-apartment-option">
									<input type="radio" id="EH-exercise-type1-possibilities3-q4-b" name="EH-exercise-type1-possibilities3-q4" value="b">
									<label for="EH-exercise-type1-possibilities3-q4-b" data-i18n="apartment.questions.q4b">His coworker Maria</label>
								</div>
								<div class="EH-apartment-option">
									<input type="radio" id="EH-exercise-type1-possibilities3-q4-c" name="EH-exercise-type1-possibilities3-q4" value="c">
									<label for="EH-exercise-type1-possibilities3-q4-c" data-i18n="apartment.questions.q4c">A real estate agent</label>
								</div>
							</div>
							<div class="EH-exercise-type1-possibilities3-answer-status" id="EH-exercise-type1-possibilities3-q4-status"></div>
						</div>
						<!-- Question 5 -->
						<div class="EH-apartment-question-card">
							<div class="EH-apartment-question-number">5</div>
							<p class="EH-apartment-question-text" data-i18n="apartment.questions.q5">What was the rent for the apartment Ahmed finally chose?</p>
							<div class="EH-apartment-options">
								<div class="EH-apartment-option">
									<input type="radio" id="EH-exercise-type1-possibilities3-q5-a" name="EH-exercise-type1-possibilities3-q5" value="a">
									<label for="EH-exercise-type1-possibilities3-q5-a" data-i18n="apartment.questions.q5a">$1100 plus utilities</label>
								</div>
								<div class="EH-apartment-option">
									<input type="radio" id="EH-exercise-type1-possibilities3-q5-b" name="EH-exercise-type1-possibilities3-q5" value="b">
									<label for="EH-exercise-type1-possibilities3-q5-b" data-i18n="apartment.questions.q5b">$1150 including utilities</label>
								</div>
								<div class="EH-apartment-option">
									<input type="radio" id="EH-exercise-type1-possibilities3-q5-c" name="EH-exercise-type1-possibilities3-q5" value="c">
									<label for="EH-exercise-type1-possibilities3-q5-c" data-i18n="apartment.questions.q5c">$1300</label>
								</div>
							</div>
							<div class="EH-exercise-type1-possibilities3-answer-status" id="EH-exercise-type1-possibilities3-q5-status"></div>
						</div>
					</div>
					<!-- Answer Check and Score System -->
					<div class="EH-exercise-type1-possibilities3-answers-control">
						<button class="EH-exercise-type1-possibilities3-check-answers-btn" id="EH-exercise-type1-possibilities3-check-answers" data-i18n="apartment.answers.check">Check Answers</button>
						<div class="EH-exercise-type1-possibilities3-score-display" id="EH-exercise-type1-possibilities3-score-display">
							<h3 class="EH-exercise-type1-possibilities3-score-title" data-i18n="apartment.answers.score">Your Score</h3>
							<div class="EH-exercise-type1-possibilities3-score-value" id="EH-exercise-type1-possibilities3-score-value">0/5</div>
							<p class="EH-exercise-type1-possibilities3-score-feedback" id="EH-exercise-type1-possibilities3-score-feedback" data-i18n="apartment.answers.feedback.default">Check your answers to see how you did!</p>
						</div>
					</div>
				</div>
				<!-- Vocabulary Section -->
				<div class="EH-apartment-section">
					<h2 class="EH-apartment-section-title" data-i18n="apartment.sections.vocabulary">Vocabulary Cards</h2>
					<div class="EH-apartment-vocabulary-container">
						<!-- Vocabulary Card 1 -->
						<div class="EH-apartment-vocabulary-card">
							<div class="EH-apartment-vocabulary-word" data-i18n="apartment.vocabulary.rental">Rental</div>
							<div class="EH-apartment-vocabulary-pronunciation" data-i18n="apartment.vocabulary.rental_pron">/Ààr…õntl/</div>
							<div class="EH-apartment-vocabulary-definition" data-i18n="apartment.vocabulary.rental_def">Related to property that is rented rather than owned</div>
							<div class="EH-apartment-vocabulary-example" data-i18n="apartment.vocabulary.rental_ex">"Ahmed looked at rental websites to find an apartment."</div>
						</div>
						<!-- Vocabulary Card 2 -->
						<div class="EH-apartment-vocabulary-card">
							<div class="EH-apartment-vocabulary-word" data-i18n="apartment.vocabulary.utilities">Utilities</div>
							<div class="EH-apartment-vocabulary-pronunciation" data-i18n="apartment.vocabulary.utilities_pron">/juÀêÀàt…™l…™tiz/</div>
							<div class="EH-apartment-vocabulary-definition" data-i18n="apartment.vocabulary.utilities_def">Basic services like electricity, water, and gas</div>
							<div class="EH-apartment-vocabulary-example" data-i18n="apartment.vocabulary.utilities_ex">"The rent was $1100 plus utilities."</div>
						</div>
						<!-- Vocabulary Card 3 -->
						<div class="EH-apartment-vocabulary-card">
							<div class="EH-apartment-vocabulary-word" data-i18n="apartment.vocabulary.landlord">Landlord</div>
							<div class="EH-apartment-vocabulary-pronunciation" data-i18n="apartment.vocabulary.landlord_pron">/Ààl√¶ndl…îÀêrd/</div>
							<div class="EH-apartment-vocabulary-definition" data-i18n="apartment.vocabulary.landlord_def">A person who owns and rents out property</div>
							<div class="EH-apartment-vocabulary-example" data-i18n="apartment.vocabulary.landlord_ex">"The landlord showed Ahmed the apartment."</div>
						</div>
						<!-- Vocabulary Card 4 -->
						<div class="EH-apartment-vocabulary-card">
							<div class="EH-apartment-vocabulary-word" data-i18n="apartment.vocabulary.lease">Lease</div>
							<div class="EH-apartment-vocabulary-pronunciation" data-i18n="apartment.vocabulary.lease_pron">/liÀês/</div>
							<div class="EH-apartment-vocabulary-definition" data-i18n="apartment.vocabulary.lease_def">A legal contract for renting property</div>
							<div class="EH-apartment-vocabulary-example" data-i18n="apartment.vocabulary.lease_ex">"Ahmed signed the lease agreement for his new apartment."</div>
						</div>
						<!-- Vocabulary Card 5 -->
						<div class="EH-apartment-vocabulary-card">
							<div class="EH-apartment-vocabulary-word" data-i18n="apartment.vocabulary.budget">Budget</div>
							<div class="EH-apartment-vocabulary-pronunciation" data-i18n="apartment.vocabulary.budget_pron">/Ààb åd í…™t/</div>
							<div class="EH-apartment-vocabulary-definition" data-i18n="apartment.vocabulary.budget_def">A plan for how much money to spend on something</div>
							<div class="EH-apartment-vocabulary-example" data-i18n="apartment.vocabulary.budget_ex">"Ahmed had a budget of $1200 for rent each month."</div>
						</div>
					</div>
				</div>
				<!-- Pronunciation Practice Section -->
				<div class="EH-apartment-section">
					<h2 class="EH-apartment-section-title" data-i18n="apartment.sections.pronunciation">Pronunciation Practice</h2>
					<div class="EH-apartment-pronunciation-container">
						<!-- Pronunciation 1 -->
						<div class="EH-apartment-pronunciation-card">
							<div class="EH-apartment-pronunciation-number">1</div>
							<p class="EH-apartment-pronunciation-text" data-i18n="apartment.pronunciation.p1">"I'm calling about the apartment for rent."</p>
							<div class="EH-apartment-pronunciation-controls">
								<button class="EH-apartment-pronunciation-btn" data-audio="apartment-pronunciation-1-listen" data-tooltip="Listen">
									üîä
								</button>
								<button class="EH-apartment-pronunciation-btn record" data-audio="apartment-pronunciation-1-record" data-tooltip="Record">
									‚óè
								</button>
								<button class="EH-apartment-pronunciation-btn play-recorded" data-audio="apartment-pronunciation-1-playback" style="display: none;" data-tooltip="Playback">
									‚ñ∂
								</button>
							</div>
							<div class="EH-apartment-recording-status" data-status="apartment-pronunciation-1-status"></div>
						</div>
						<!-- Pronunciation 2 -->
						<div class="EH-apartment-pronunciation-card">
							<div class="EH-apartment-pronunciation-number">2</div>
							<p class="EH-apartment-pronunciation-text" data-i18n="apartment.pronunciation.p2">"What is the monthly rent including utilities?"</p>
							<div class="EH-apartment-pronunciation-controls">
								<button class="EH-apartment-pronunciation-btn" data-audio="apartment-pronunciation-2-listen" data-tooltip="Listen">
									üîä
								</button>
								<button class="EH-apartment-pronunciation-btn record" data-audio="apartment-pronunciation-2-record" data-tooltip="Record">
									‚óè
								</button>
								<button class="EH-apartment-pronunciation-btn play-recorded" data-audio="apartment-pronunciation-2-playback" style="display: none;" data-tooltip="Playback">
									‚ñ∂
								</button>
							</div>
							<div class="EH-apartment-recording-status" data-status="apartment-pronunciation-2-status"></div>
						</div>
						<!-- Pronunciation 3 -->
						<div class="EH-apartment-pronunciation-card">
							<div class="EH-apartment-pronunciation-number">3</div>
							<p class="EH-apartment-pronunciation-text" data-i18n="apartment.pronunciation.p3">"Could I see the apartment this afternoon?"</p>
							<div class="EH-apartment-pronunciation-controls">
								<button class="EH-apartment-pronunciation-btn" data-audio="apartment-pronunciation-3-listen" data-tooltip="Listen">
									üîä
								</button>
								<button class="EH-apartment-pronunciation-btn record" data-audio="apartment-pronunciation-3-record" data-tooltip="Record">
									‚óè
								</button>
								<button class="EH-apartment-pronunciation-btn play-recorded" data-audio="apartment-pronunciation-3-playback" style="display: none;" data-tooltip="Playback">
									‚ñ∂
								</button>
							</div>
							<div class="EH-apartment-recording-status" data-status="apartment-pronunciation-3-status"></div>
						</div>
						<!-- Pronunciation 4 -->
						<div class="EH-apartment-pronunciation-card">
							<div class="EH-apartment-pronunciation-number">4</div>
							<p class="EH-apartment-pronunciation-text" data-i18n="apartment.pronunciation.p4">"I'd like to fill out a rental application."</p>
							<div class="EH-apartment-pronunciation-controls">
								<button class="EH-apartment-pronunciation-btn" data-audio="apartment-pronunciation-4-listen" data-tooltip="Listen">
									üîä
								</button>
								<button class="EH-apartment-pronunciation-btn record" data-audio="apartment-pronunciation-4-record" data-tooltip="Record">
									‚óè
								</button>
								<button class="EH-apartment-pronunciation-btn play-recorded" data-audio="apartment-pronunciation-4-playback" style="display: none;" data-tooltip="Playback">
									‚ñ∂
								</button>
							</div>
							<div class="EH-apartment-recording-status" data-status="apartment-pronunciation-4-status"></div>
						</div>
						<!-- Pronunciation 5 -->
						<div class="EH-apartment-pronunciation-card">
							<div class="EH-apartment-pronunciation-number">5</div>
							<p class="EH-apartment-pronunciation-text" data-i18n="apartment.pronunciation.p5">"When can I sign the lease agreement?"</p>
							<div class="EH-apartment-pronunciation-controls">
								<button class="EH-apartment-pronunciation-btn" data-audio="apartment-pronunciation-5-listen" data-tooltip="Listen">
									üîä
								</button>
								<button class="EH-apartment-pronunciation-btn record" data-audio="apartment-pronunciation-5-record" data-tooltip="Record">
									‚óè
								</button>
								<button class="EH-apartment-pronunciation-btn play-recorded" data-audio="apartment-pronunciation-5-playback" style="display: none;" data-tooltip="Playback">
									‚ñ∂
								</button>
							</div>
							<div class="EH-apartment-recording-status" data-status="apartment-pronunciation-5-status"></div>
						</div>
					</div>
				</div>
				<!-- Navigation Buttons -->
				<div class="EH-apartment-navigation">
					<button class="EH-apartment-nav-button back" onclick="window.location.href='Eh-general-reading-adventures.html'">
						‚Üê <span data-i18n="common.backToReadingAdventures">Back to Reading Adventures</span>
					</button>
					<button class="EH-apartment-nav-button" onclick="window.location.href='EH-reading-banking.html'">
						<span data-i18n="common.nextLesson">Next Lesson</span> ‚Üí
					</button>
				</div>
			</div>
		</div>
		<!-- Common Footer -->
		<footer class="EH-common-footer">
			<div class="EH-common-footer-content">
				<div class="EH-common-footer-developer" data-i18n="footer.developer">Developer: Mejri Ziad</div>
				<div class="EH-common-footer-links">
					<a href="#" data-i18n="footer.privacy">Privacy Policy</a>
					<a href="#" data-i18n="footer.terms">Terms of Service</a>
					<a href="#" data-i18n="footer.contact">Contact</a>
				</div>
			</div>
		</footer>
		<!-- i18n translations -->
		<script src="scripts/translations/i18n_en.js"></script>
		<script src="scripts/translations/i18n_fr.js"></script>
		<script src="scripts/translations/i18n_ar.js"></script>
		<script src="scripts/common-i18n.js"></script>
		<!-- Include the generic sound library -->
		<script src="scripts/sound.js"></script>
		<script src="scripts/exercise.js"></script>
		<script>
			// Lesson-specific audio configuration
			const audioConfig = {
				'apartment-story': 'assets/audio/lessons/category2/lesson2/apartment-story.mp3',
				'apartment-pronunciation-1-listen': 'assets/audio/lessons/category2/lesson2/pronunciation-1.mp3',
				'apartment-pronunciation-2-listen': 'assets/audio/lessons/category2/lesson2/pronunciation-2.mp3',
				'apartment-pronunciation-3-listen': 'assets/audio/lessons/category2/lesson2/pronunciation-3.mp3',
				'apartment-pronunciation-4-listen': 'assets/audio/lessons/category2/lesson2/pronunciation-4.mp3',
				'apartment-pronunciation-5-listen': 'assets/audio/lessons/category2/lesson2/pronunciation-5.mp3'
			};
			// Correct answers for questions
			const correctAnswers = {
				'EH-exercise-type1-possibilities3-q1': 'b', // In a temporary hostel
				'EH-exercise-type1-possibilities3-q2': 'b', // $1200
				'EH-exercise-type1-possibilities3-q3': 'b', // It had a view of another building's wall
				'EH-exercise-type1-possibilities3-q4': 'b', // His coworker Maria
				'EH-exercise-type1-possibilities3-q5': 'b'  // $1150 including utilities
			};
			// Audio progress tracking
			let progressInterval;
			function updateProgressBar(audioKey) {
				const audio = audioPlayers[audioKey];
				if (!audio) return;
				const progressSlider = document.getElementById('EH-apartment-progress');
				const timeDisplay = document.getElementById('EH-apartment-time');
				if (audio.duration) {
					const progress = (audio.currentTime / audio.duration) * 100;
					progressSlider.value = progress;
					// Update time display
					const currentTime = formatTime(audio.currentTime);
					const duration = formatTime(audio.duration);
					timeDisplay.textContent = `${currentTime} / ${duration}`;
				}
			}
			function formatTime(seconds) {
				const mins = Math.floor(seconds / 60);
				const secs = Math.floor(seconds % 60);
				return `${mins}:${secs.toString().padStart(2, '0')}`;
			}
			function setupProgressTracking(audioKey) {
				const audio = audioPlayers[audioKey];
				if (!audio) return;
				// Clear any existing interval
				if (progressInterval) {
					clearInterval(progressInterval);
				}
				// Update progress every 100ms
				progressInterval = setInterval(() => {
					updateProgressBar(audioKey);
				}, 100);
				// Setup progress slider event
				const progressSlider = document.getElementById('EH-apartment-progress');
				progressSlider.addEventListener('input', function() {
					if (audio.duration) {
						const seekTime = (this.value / 100) * audio.duration;
						audio.currentTime = seekTime;
					}
				});
				// Reset when audio ends
				audio.addEventListener('ended', function() {
					if (progressInterval) {
						clearInterval(progressInterval);
					}
					progressSlider.value = 0;
					document.getElementById('EH-apartment-time').textContent = '0:00 / ' + formatTime(audio.duration);
				});
			}
			function setupSpeedControl() {
				const speedSlider = document.getElementById('EH-apartment-speed');
				const speedValue = document.getElementById('EH-apartment-speed-value');
				speedSlider.addEventListener('input', function() {
					const speed = this.value / 100;
					speedValue.textContent = speed.toFixed(1) + 'x';
					// Apply speed to all audio players
					for (const key in audioPlayers) {
						if (audioPlayers[key]) {
							audioPlayers[key].playbackRate = speed;
						}
					}
				});
			}
			// Initialize when DOM is loaded
			document.addEventListener('DOMContentLoaded', function() {
				// Initialize audio players with lesson-specific config
				initAudioPlayers(audioConfig);
				// Set up main story audio controls
				document.getElementById('EH-apartment-play-btn').addEventListener('click', function() {
    playAudio('apartment-story');
    setupProgressTracking('apartment-story');
    // Show pause button, hide play button
    document.getElementById('EH-apartment-play-btn').style.display = 'none';
    document.getElementById('EH-apartment-pause-btn').style.display = 'flex';
});
				document.getElementById('EH-apartment-pause-btn').addEventListener('click', function() {
    pauseAudio('apartment-story');
    if (progressInterval) {
        clearInterval(progressInterval);
    }
    // Show play button, hide pause button
    document.getElementById('EH-apartment-play-btn').style.display = 'flex';
    document.getElementById('EH-apartment-pause-btn').style.display = 'none';
	});
				document.getElementById('EH-apartment-stop-btn').addEventListener('click', function() {
    stopAudio('apartment-story');
    if (progressInterval) {
        clearInterval(progressInterval);
    }
    document.getElementById('EH-apartment-progress').value = 0;
    document.getElementById('EH-apartment-time').textContent = '0:00 / 0:00';
    // Show play button, hide pause button
    document.getElementById('EH-apartment-play-btn').style.display = 'flex';
    document.getElementById('EH-apartment-pause-btn').style.display = 'none';
});
				document.getElementById('EH-apartment-volume').addEventListener('input', function() {
					setGlobalVolume(this.value);
				});
				// Setup speed control
				setupSpeedControl();
				// Set up pronunciation practice listeners
				setupPronunciationListeners();
				// Set up answer checking
				ExerciseType1Possibilities3Init(correctAnswers, Object.keys(correctAnswers).length, 'EH-exercise-type1-possibilities3');
				// Initialize with default volume
				setGlobalVolume(80);
			});
		</script>
	</body>
</html>