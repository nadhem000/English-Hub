<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Public Transportation - Reading Adventures</title>
		<!-- Common CSS -->
		<link rel="stylesheet" href="styles/common.css">
		<style>
			/* Reset and Base Styles */
			* {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
			}
			body {
            background: linear-gradient(135deg, #1a3a5f, #4a8c7c, #f2a65a);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 20px;
			}
			/* Transport Lesson Specific Styles */
			.EH-transport-container {
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            flex: 1;
            display: flex;
            flex-direction: column;
			}
			.EH-transport-content {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            margin-bottom: 30px;
			}
			.EH-transport-section {
            margin-bottom: 40px;
            padding-bottom: 30px;
            border-bottom: 1px solid #e0e0e0;
			}
			.EH-transport-section-title {
            font-size: 1.8rem;
            color: #1a3a5f;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f2a65a;
			}
			/* Audio Player Styles */
			.EH-transport-audio-player {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            text-align: center;
			}
			.EH-transport-audio-title {
            font-size: 1.4rem;
            margin-bottom: 20px;
            color: #333;
			}
			.EH-transport-audio-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
			}
			.EH-transport-audio-btn {
            background: #4a8c7c;
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: background 0.3s;
            font-size: 1.2rem;
            position: relative;
			}
			.EH-transport-audio-btn:hover {
            background: #3a7c6c;
			}
			.EH-transport-audio-btn:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: -40px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            white-space: nowrap;
            z-index: 10;
			}
			.EH-transport-audio-btn.stop {
            background: #f2a65a;
			}
			.EH-transport-audio-btn.stop:hover {
            background: #e2964a;
			}
			.EH-transport-audio-btn.pause {
            background: #1a3a5f;
			}
			.EH-transport-audio-btn.pause:hover {
            background: #0a2a4f;
			}
			.EH-transport-volume-container {
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
            margin-top: 10px;
			}
			.EH-transport-volume-slider {
            width: 150px;
			}
			/* Story Content Styles */
			.EH-transport-story {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            line-height: 1.6;
            color: #333;
			}
			.EH-transport-story p {
            margin-bottom: 15px;
			}
			/* Comprehension Questions Styles */
			.EH-transport-questions-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
			}
			.EH-transport-question-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
			}
			.EH-transport-question-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
			}
			.EH-transport-question-number {
            display: inline-block;
            width: 35px;
            height: 35px;
            background: linear-gradient(135deg, #4a8c7c, #6cac9c);
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            margin-bottom: 15px;
			}
			.EH-transport-question-text {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: #333;
			}
			.EH-transport-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
			}
			.EH-transport-option {
            display: flex;
            align-items: center;
            gap: 10px;
			}
			.EH-transport-option input {
            cursor: pointer;
			}
			.EH-transport-option label {
            cursor: pointer;
			}
			/* Vocabulary Cards Styles */
			.EH-transport-vocabulary-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
			}
			.EH-transport-vocabulary-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            display: flex;
            flex-direction: column;
			}
			.EH-transport-vocabulary-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
			}
			.EH-transport-vocabulary-word {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: #1a3a5f;
			}
			.EH-transport-vocabulary-pronunciation {
            font-style: italic;
            color: #666;
            margin-bottom: 10px;
			}
			.EH-transport-vocabulary-definition {
            margin-bottom: 15px;
            color: #333;
            flex: 1;
			}
			.EH-transport-vocabulary-example {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 10px;
            font-style: italic;
            color: #555;
			}
			/* Pronunciation Practice Styles */
			.EH-transport-pronunciation-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
			}
			.EH-transport-pronunciation-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
			}
			.EH-transport-pronunciation-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
			}
			.EH-transport-pronunciation-number {
            display: inline-block;
            width: 35px;
            height: 35px;
            background: linear-gradient(135deg, #f2a65a, #ffb66a);
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            margin-bottom: 15px;
			}
			.EH-transport-pronunciation-text {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #333;
            text-align: center;
			}
			.EH-transport-pronunciation-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
			}
			.EH-transport-pronunciation-btn {
            background: #4a8c7c;
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
			}
			.EH-transport-pronunciation-btn:hover {
            background: #3a7c6c;
			}
			.EH-transport-pronunciation-btn:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: -40px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            white-space: nowrap;
            z-index: 10;
			}
			.EH-transport-pronunciation-btn.record {
            background: #f2a65a;
			}
			.EH-transport-pronunciation-btn.record:hover {
            background: #e2964a;
			}
			.EH-transport-pronunciation-btn.recording {
            background: #d9534f;
            animation: pulse 1.5s infinite;
			}
			@keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
			}
			.EH-transport-pronunciation-btn.play-recorded {
            background: #1a3a5f;
			}
			.EH-transport-pronunciation-btn.play-recorded:hover {
            background: #0a2a4f;
			}
			/* Recording status indicator */
			.EH-transport-recording-status {
            text-align: center;
            margin-top: 10px;
            font-size: 0.9rem;
            color: #666;
			}
			.EH-transport-recording-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            background: #d9534f;
            border-radius: 50%;
            margin-right: 5px;
            animation: blink 1s infinite;
			}
			@keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
			}
			/* Navigation Buttons */
			.EH-transport-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
			}
			.EH-transport-nav-button {
            background: #4a8c7c;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 8px;
			}
			.EH-transport-nav-button:hover {
            background: #3a7c6c;
			}
			.EH-transport-nav-button.back {
            background: #f2a65a;
			}
			.EH-transport-nav-button.back:hover {
            background: #e2964a;
			}
			/* Progress Slider Styles */
			.EH-transport-progress-container {
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
            margin: 15px 0;
            width: 100%;
            flex-wrap: wrap;
			}
			.EH-transport-progress-slider {
            flex: 1;
            min-width: 200px;
            max-width: 400px;
			}
			.EH-transport-time-display {
            font-size: 0.9rem;
            color: #666;
            min-width: 80px;
            text-align: center;
			}
			/* Controls Row */
			.EH-transport-controls-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            margin-top: 15px;
            flex-wrap: wrap;
			}
			.EH-transport-control-group {
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;
            min-width: 150px;
            justify-content: center;
			}
			.EH-transport-control-slider {
            width: 100px;
			}
			.EH-transport-speed-value {
            font-size: 0.9rem;
            color: #666;
            min-width: 35px;
            text-align: center;
            font-weight: bold;
			}
			/* Unified Exercise Styles - EH-exercise-type1-possibilities3- prefix */
			.EH-exercise-type1-possibilities3-answers-control {
			display: flex;
			flex-direction: column;
			align-items: center;
			margin-top: 30px;
			gap: 20px;
			}
			.EH-exercise-type1-possibilities3-check-answers-btn {
			background: #4a8c7c;
			color: white;
			border: none;
			padding: 12px 25px;
			border-radius: 20px;
			cursor: pointer;
			font-weight: bold;
			transition: background 0.3s;
			font-size: 1rem;
			}
			.EH-exercise-type1-possibilities3-check-answers-btn:hover {
			background: #3a7c6c;
			}
			.EH-exercise-type1-possibilities3-score-display {
			background: white;
			border-radius: 15px;
			padding: 20px;
			box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
			text-align: center;
			display: none;
			width: 100%;
			max-width: 500px;
			}
			.EH-exercise-type1-possibilities3-score-title {
			font-size: 1.4rem;
			margin-bottom: 15px;
			color: #1a3a5f;
			}
			.EH-exercise-type1-possibilities3-score-value {
			font-size: 2rem;
			font-weight: bold;
			color: #4a8c7c;
			margin-bottom: 15px;
			}
			.EH-exercise-type1-possibilities3-score-feedback {
			font-size: 1.1rem;
			color: #333;
			margin-bottom: 15px;
			}
			.EH-exercise-type1-possibilities3-answer-status {
			margin-top: 10px;
			font-size: 0.9rem;
			padding: 5px 10px;
			border-radius: 5px;
			display: inline-block;
			}
			.EH-exercise-type1-possibilities3-correct-answer {
			background-color: #d4edda;
			color: #155724;
			border: 1px solid #c3e6cb;
			}
			.EH-exercise-type1-possibilities3-incorrect-answer {
			background-color: #f8d7da;
			color: #721c24;
			border: 1px solid #f5c6cb;
			}
			.EH-exercise-type1-possibilities3-option.correct {
			background-color: #d4edda;
			padding: 5px;
			border-radius: 5px;
			border: 1px solid #c3e6cb;
			}
			.EH-exercise-type1-possibilities3-option.incorrect {
			background-color: #f8d7da;
			padding: 5px;
			border-radius: 5px;
			border: 1px solid #f5c6cb;
			}
			/* Responsive Design */
			@media (max-width: 768px) {
            .EH-transport-questions-container,
            .EH-transport-vocabulary-container,
            .EH-transport-pronunciation-container {
			grid-template-columns: 1fr;
            }
            .EH-transport-navigation {
			flex-direction: column;
			gap: 15px;
            }
            .EH-transport-nav-button {
			width: 100%;
			justify-content: center;
            }
            .EH-transport-controls-row {
			flex-direction: column;
			gap: 15px;
            }
            .EH-transport-control-group {
			min-width: 200px;
            }
            .EH-transport-progress-container {
			flex-direction: column;
			gap: 8px;
            }
            .EH-transport-progress-slider {
			min-width: 100%;
            }
			}
			@media (max-width: 480px) {
            .EH-transport-content {
			padding: 20px;
            }
			}
		</style>
	</head>
	<body>
		<!-- Language Selector -->
		<div style="position: fixed; top: 20px; right: 20px; z-index: 1000;">
			<select id="language-selector" style="padding: 8px 12px; border-radius: 8px; border: 2px solid #fff; background: rgba(255,255,255,0.9); color: #333; font-weight: bold;">
				<option value="en">English</option>
				<option value="fr">Fran√ßais</option>
				<option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
			</select>
		</div>
		<div class="EH-site-header">
			<a href="index.html" class="EH-site-logo-link" data-i18n="common.mainPage" title="Main Page">
				<img src="assets/icons/icon-192x192.png" alt="English Hub Logo" class="EH-site-logo">
			</a>
			<span class="EH-site-name" data-i18n="common.siteName">English Hub</span>
		</div>
		<div class="EH-transport-container">
			<!-- Common Header -->
			<header class="EH-common-header">
				<h1 class="EH-common-title" data-i18n="transport.title">Public Transportation</h1>
				<p class="EH-common-subtitle" data-i18n="transport.subtitle">Follow Anya as she learns to navigate a new city's public transportation system</p>
			</header>
			<div class="EH-transport-content">
				<!-- Audio Player Section -->
				<div class="EH-transport-section">
					<h2 class="EH-transport-section-title" data-i18n="transport.sections.listen">Listen to the Story</h2>
					<div class="EH-transport-audio-player">
						<h3 class="EH-transport-audio-title" data-i18n="transport.audio.title">Anya's First Day Using Public Transport</h3>
						<div class="EH-transport-audio-controls">
							<button class="EH-transport-audio-btn" id="EH-transport-play-btn" data-tooltip="Play">
								‚ñ∂
							</button>
							<button class="EH-transport-audio-btn pause" id="EH-transport-pause-btn" style="display: none;" data-tooltip="Pause">
								‚è∏
							</button>
							<button class="EH-transport-audio-btn stop" id="EH-transport-stop-btn" data-tooltip="Stop">
								‚èπ
							</button>
						</div>
						<!-- Progress Slider -->
						<div class="EH-transport-progress-container">
							<span data-i18n="common.progress">Progress:</span>
							<input type="range" min="0" max="100" value="0" class="EH-transport-progress-slider" id="EH-transport-progress">
							<span class="EH-transport-time-display" id="EH-transport-time">0:00 / 0:00</span>
						</div>
						<!-- Control sliders container -->
						<div class="EH-transport-controls-row">
							<!-- Volume Control -->
							<div class="EH-transport-control-group">
								<span data-i18n="common.volume">Volume:</span>
								<input type="range" min="0" max="100" value="80" class="EH-transport-control-slider" id="EH-transport-volume">
							</div>
							<!-- Speed Control -->
							<div class="EH-transport-control-group">
								<span data-i18n="common.speed">Speed:</span>
								<input type="range" min="50" max="200" value="100" class="EH-transport-control-slider" id="EH-transport-speed">
								<span class="EH-transport-speed-value" id="EH-transport-speed-value">1.0x</span>
							</div>
						</div>
						<div class="EH-transport-recording-status" id="EH-transport-audio-status" data-i18n="transport.audio.status.loading">Loading audio...</div>
					</div>
				</div>
				<!-- Story Content Section -->
				<div class="EH-transport-section">
					<h2 class="EH-transport-section-title" data-i18n="transport.sections.story">Story Text</h2>
					<div class="EH-transport-story">
						<p data-i18n="transport.story.p1">Anya looked at the complex metro map, feeling both excited and overwhelmed. She had just moved to the city for her new job and needed to figure out the public transportation system to get to work.</p>
						<p data-i18n="transport.story.p2">She approached the information desk at the station. "Excuse me, could you help me? I need to get to the city center," she asked politely.</p>
						<p data-i18n="transport.story.p3">The station attendant smiled and pointed to the map. "Of course. You need to take the Blue Line towards Downtown. Get off at Central Station, then transfer to the Green Line for two stops."</p>
						<p data-i18n="transport.story.p4">Anya bought a transit card and loaded it with credit. She noticed the different ticket options: single ride, day pass, and monthly pass. She decided the monthly pass would be most economical for her daily commute.</p>
						<p data-i18n="transport.story.p5">On the platform, she watched the electronic signs displaying the arrival times. She felt a sense of accomplishment when she successfully boarded the correct train.</p>
						<p data-i18n="transport.story.p6">During her journey, Anya observed how other passengers behaved - where they stood, how they made space for others, and how they validated their tickets.</p>
						<p data-i18n="transport.story.p7">After a few days, Anya became more confident. She even helped a lost tourist find their way, using the skills she had just learned.</p>
						<p data-i18n="transport.story.p8">By the end of the week, Anya was navigating the city like a local. She realized that mastering public transportation was key to feeling at home in her new city.</p>
					</div>
				</div>
				<!-- Comprehension Questions Section -->
				<div class="EH-transport-section">
					<h2 class="EH-transport-section-title" data-i18n="transport.sections.questions">Comprehension Questions</h2>
					<div class="EH-transport-questions-container">
						<!-- Question 1 -->
						<div class="EH-transport-question-card">
							<div class="EH-transport-question-number">1</div>
							<p class="EH-transport-question-text" data-i18n="transport.questions.q1">How did Anya feel when she first looked at the metro map?</p>
							<div class="EH-transport-options">
								<div class="EH-transport-option">
									<input type="radio" id="EH-exercise-type1-possibilities3-q1-a" name="EH-exercise-type1-possibilities3-q1" value="a">
									<label for="EH-exercise-type1-possibilities3-q1-a" data-i18n="transport.questions.q1a">Excited and overwhelmed</label>
								</div>
								<div class="EH-transport-option">
									<input type="radio" id="EH-exercise-type1-possibilities3-q1-b" name="EH-exercise-type1-possibilities3-q1" value="b">
									<label for="EH-exercise-type1-possibilities3-q1-b" data-i18n="transport.questions.q1b">Bored and uninterested</label>
								</div>
								<div class="EH-transport-option">
									<input type="radio" id="EH-exercise-type1-possibilities3-q1-c" name="EH-exercise-type1-possibilities3-q1" value="c">
									<label for="EH-exercise-type1-possibilities3-q1-c" data-i18n="transport.questions.q1c">Confident and prepared</label>
								</div>
							</div>
							<div class="EH-exercise-type1-possibilities3-answer-status" id="EH-exercise-type1-possibilities3-q1-status"></div>
						</div>
						<!-- Question 2 -->
						<div class="EH-transport-question-card">
							<div class="EH-transport-question-number">2</div>
							<p class="EH-transport-question-text" data-i18n="transport.questions.q2">What did the station attendant tell Anya to do?</p>
							<div class="EH-transport-options">
								<div class="EH-transport-option">
									<input type="radio" id="EH-exercise-type1-possibilities3-q2-a" name="EH-exercise-type1-possibilities3-q2" value="a">
									<label for="EH-exercise-type1-possibilities3-q2-a" data-i18n="transport.questions.q2a">Take the Red Line</label>
								</div>
								<div class="EH-transport-option">
									<input type="radio" id="EH-exercise-type1-possibilities3-q2-b" name="EH-exercise-type1-possibilities3-q2" value="b">
									<label for="EH-exercise-type1-possibilities3-q2-b" data-i18n="transport.questions.q2b">Take the Blue Line and transfer to Green Line</label>
								</div>
								<div class="EH-transport-option">
									<input type="radio" id="EH-exercise-type1-possibilities3-q2-c" name="EH-exercise-type1-possibilities3-q2" value="c">
									<label for="EH-exercise-type1-possibilities3-q2-c" data-i18n="transport.questions.q2c">Take a bus</label>
								</div>
							</div>
							<div class="EH-exercise-type1-possibilities3-answer-status" id="EH-exercise-type1-possibilities3-q2-status"></div>
						</div>
						<!-- Question 3 -->
						<div class="EH-transport-question-card">
							<div class="EH-transport-question-number">3</div>
							<p class="EH-transport-question-text" data-i18n="transport.questions.q3">What type of ticket did Anya decide to buy?</p>
							<div class="EH-transport-options">
								<div class="EH-transport-option">
									<input type="radio" id="EH-exercise-type1-possibilities3-q3-a" name="EH-exercise-type1-possibilities3-q3" value="a">
									<label for="EH-exercise-type1-possibilities3-q3-a" data-i18n="transport.questions.q3a">Single ride</label>
								</div>
								<div class="EH-transport-option">
									<input type="radio" id="EH-exercise-type1-possibilities3-q3-b" name="EH-exercise-type1-possibilities3-q3" value="b">
									<label for="EH-exercise-type1-possibilities3-q3-b" data-i18n="transport.questions.q3b">Day pass</label>
								</div>
								<div class="EH-transport-option">
									<input type="radio" id="EH-exercise-type1-possibilities3-q3-c" name="EH-exercise-type1-possibilities3-q3" value="c">
									<label for="EH-exercise-type1-possibilities3-q3-c" data-i18n="transport.questions.q3c">Monthly pass</label>
								</div>
							</div>
							<div class="EH-exercise-type1-possibilities3-answer-status" id="EH-exercise-type1-possibilities3-q3-status"></div>
						</div>
						<!-- Question 4 -->
						<div class="EH-transport-question-card">
							<div class="EH-transport-question-number">4</div>
							<p class="EH-transport-question-text" data-i18n="transport.questions.q4">What did Anya observe on the platform?</p>
							<div class="EH-transport-options">
								<div class="EH-transport-option">
									<input type="radio" id="EH-exercise-type1-possibilities3-q4-a" name="EH-exercise-type1-possibilities3-q4" value="a">
									<label for="EH-exercise-type1-possibilities3-q4-a" data-i18n="transport.questions.q4a">The cleanliness of the station</label>
								</div>
								<div class="EH-transport-option">
									<input type="radio" id="EH-exercise-type1-possibilities3-q4-b" name="EH-exercise-type1-possibilities3-q4" value="b">
									<label for="EH-exercise-type1-possibilities3-q4-b" data-i18n="transport.questions.q4b">Electronic signs with arrival times</label>
								</div>
								<div class="EH-transport-option">
									<input type="radio" id="EH-exercise-type1-possibilities3-q4-c" name="EH-exercise-type1-possibilities3-q4" value="c">
									<label for="EH-exercise-type1-possibilities3-q4-c" data-i18n="transport.questions.q4c">The advertisements</label>
								</div>
							</div>
							<div class="EH-exercise-type1-possibilities3-answer-status" id="EH-exercise-type1-possibilities3-q4-status"></div>
						</div>
						<!-- Question 5 -->
						<div class="EH-transport-question-card">
							<div class="EH-transport-question-number">5</div>
							<p class="EH-transport-question-text" data-i18n="transport.questions.q5">How did Anya feel by the end of the week?</p>
							<div class="EH-transport-options">
								<div class="EH-transport-option">
									<input type="radio" id="EH-exercise-type1-possibilities3-q5-a" name="EH-exercise-type1-possibilities3-q5" value="a">
									<label for="EH-exercise-type1-possibilities3-q5-a" data-i18n="transport.questions.q5a">Still confused</label>
								</div>
								<div class="EH-transport-option">
									<input type="radio" id="EH-exercise-type1-possibilities3-q5-b" name="EH-exercise-type1-possibilities3-q5" value="b">
									<label for="EH-exercise-type1-possibilities3-q5-b" data-i18n="transport.questions.q5b">Like a local</label>
								</div>
								<div class="EH-transport-option">
									<input type="radio" id="EH-exercise-type1-possibilities3-q5-c" name="EH-exercise-type1-possibilities3-q5" value="c">
									<label for="EH-exercise-type1-possibilities3-q5-c" data-i18n="transport.questions.q5c">Frustrated</label>
								</div>
							</div>
							<div class="EH-exercise-type1-possibilities3-answer-status" id="EH-exercise-type1-possibilities3-q5-status"></div>
						</div>
					</div>
					<!-- Answer Check and Score System -->
					<div class="EH-exercise-type1-possibilities3-answers-control">
						<button class="EH-exercise-type1-possibilities3-check-answers-btn" id="EH-exercise-type1-possibilities3-check-answers" data-i18n="transport.answers.check">Check Answers</button>
						<div class="EH-exercise-type1-possibilities3-score-display" id="EH-exercise-type1-possibilities3-score-display">
							<h3 class="EH-exercise-type1-possibilities3-score-title" data-i18n="transport.answers.score">Your Score</h3>
							<div class="EH-exercise-type1-possibilities3-score-value" id="EH-exercise-type1-possibilities3-score-value">0/5</div>
							<p class="EH-exercise-type1-possibilities3-score-feedback" id="EH-exercise-type1-possibilities3-score-feedback" data-i18n="transport.answers.feedback.default">Check your answers to see how you did!</p>
						</div>
					</div>
				</div>
				<!-- Vocabulary Section -->
				<div class="EH-transport-section">
					<h2 class="EH-transport-section-title" data-i18n="transport.sections.vocabulary">Vocabulary Cards</h2>
					<div class="EH-transport-vocabulary-container">
						<!-- Vocabulary Card 1 -->
						<div class="EH-transport-vocabulary-card">
							<div class="EH-transport-vocabulary-word" data-i18n="transport.vocabulary.metro">Metro</div>
							<div class="EH-transport-vocabulary-pronunciation" data-i18n="transport.vocabulary.metro_pron">/Ààm…õtro ä/</div>
							<div class="EH-transport-vocabulary-definition" data-i18n="transport.vocabulary.metro_def">An underground railway system in a city</div>
							<div class="EH-transport-vocabulary-example" data-i18n="transport.vocabulary.metro_ex">"Anya studied the metro map to find her route."</div>
						</div>
						<!-- Vocabulary Card 2 -->
						<div class="EH-transport-vocabulary-card">
							<div class="EH-transport-vocabulary-word" data-i18n="transport.vocabulary.transit_card">Transit Card</div>
							<div class="EH-transport-vocabulary-pronunciation" data-i18n="transport.vocabulary.transit_card_pron">/Ààtr√¶nz…™t k…ërd/</div>
							<div class="EH-transport-vocabulary-definition" data-i18n="transport.vocabulary.transit_card_def">A card used to pay for public transportation</div>
							<div class="EH-transport-vocabulary-example" data-i18n="transport.vocabulary.transit_card_ex">"Anya bought a transit card and loaded it with credit."</div>
						</div>
						<!-- Vocabulary Card 3 -->
						<div class="EH-transport-vocabulary-card">
							<div class="EH-transport-vocabulary-word" data-i18n="transport.vocabulary.transfer">Transfer</div>
							<div class="EH-transport-vocabulary-pronunciation" data-i18n="transport.vocabulary.transfer_pron">/Ààtr√¶nsf…ôr/</div>
							<div class="EH-transport-vocabulary-definition" data-i18n="transport.vocabulary.transfer_def">To change from one vehicle to another in the course of a journey</div>
							<div class="EH-transport-vocabulary-example" data-i18n="transport.vocabulary.transfer_ex">"She needed to transfer from the Blue Line to the Green Line."</div>
						</div>
						<!-- Vocabulary Card 4 -->
						<div class="EH-transport-vocabulary-card">
							<div class="EH-transport-vocabulary-word" data-i18n="transport.vocabulary.commute">Commute</div>
							<div class="EH-transport-vocabulary-pronunciation" data-i18n="transport.vocabulary.commute_pron">/k…ôÀàmjuÀêt/</div>
							<div class="EH-transport-vocabulary-definition" data-i18n="transport.vocabulary.commute_def">The journey to and from work</div>
							<div class="EH-transport-vocabulary-example" data-i18n="transport.vocabulary.commute_ex">"The monthly pass was most economical for her daily commute."</div>
						</div>
						<!-- Vocabulary Card 5 -->
						<div class="EH-transport-vocabulary-card">
							<div class="EH-transport-vocabulary-word" data-i18n="transport.vocabulary.validate">Validate</div>
							<div class="EH-transport-vocabulary-pronunciation" data-i18n="transport.vocabulary.validate_pron">/Ààv√¶l…™de…™t/</div>
							<div class="EH-transport-vocabulary-definition" data-i18n="transport.vocabulary.validate_def">To confirm or check the validity of something, such as a ticket</div>
							<div class="EH-transport-vocabulary-example" data-i18n="transport.vocabulary.validate_ex">"Passengers must validate their tickets before boarding."</div>
						</div>
					</div>
				</div>
				<!-- Pronunciation Practice Section -->
				<div class="EH-transport-section">
					<h2 class="EH-transport-section-title" data-i18n="transport.sections.pronunciation">Pronunciation Practice</h2>
					<div class="EH-transport-pronunciation-container">
						<!-- Pronunciation 1 -->
						<div class="EH-transport-pronunciation-card">
							<div class="EH-transport-pronunciation-number">1</div>
							<p class="EH-transport-pronunciation-text" data-i18n="transport.pronunciation.p1">"Excuse me, could you help me?"</p>
							<div class="EH-transport-pronunciation-controls">
								<button class="EH-transport-pronunciation-btn" data-audio="transport-pronunciation-1-listen" data-tooltip="Listen">
									üîä
								</button>
								<button class="EH-transport-pronunciation-btn record" data-audio="transport-pronunciation-1-record" data-tooltip="Record">
									‚óè
								</button>
								<button class="EH-transport-pronunciation-btn play-recorded" data-audio="transport-pronunciation-1-playback" style="display: none;" data-tooltip="Playback">
									‚ñ∂
								</button>
							</div>
							<div class="EH-transport-recording-status" data-status="transport-pronunciation-1-status"></div>
						</div>
						<!-- Pronunciation 2 -->
						<div class="EH-transport-pronunciation-card">
							<div class="EH-transport-pronunciation-number">2</div>
							<p class="EH-transport-pronunciation-text" data-i18n="transport.pronunciation.p2">"I need to get to the city center."</p>
							<div class="EH-transport-pronunciation-controls">
								<button class="EH-transport-pronunciation-btn" data-audio="transport-pronunciation-2-listen" data-tooltip="Listen">
									üîä
								</button>
								<button class="EH-transport-pronunciation-btn record" data-audio="transport-pronunciation-2-record" data-tooltip="Record">
									‚óè
								</button>
								<button class="EH-transport-pronunciation-btn play-recorded" data-audio="transport-pronunciation-2-playback" style="display: none;" data-tooltip="Playback">
									‚ñ∂
								</button>
							</div>
							<div class="EH-transport-recording-status" data-status="transport-pronunciation-2-status"></div>
						</div>
						<!-- Pronunciation 3 -->
						<div class="EH-transport-pronunciation-card">
							<div class="EH-transport-pronunciation-number">3</div>
							<p class="EH-transport-pronunciation-text" data-i18n="transport.pronunciation.p3">"Which line goes to Downtown?"</p>
							<div class="EH-transport-pronunciation-controls">
								<button class="EH-transport-pronunciation-btn" data-audio="transport-pronunciation-3-listen" data-tooltip="Listen">
									üîä
								</button>
								<button class="EH-transport-pronunciation-btn record" data-audio="transport-pronunciation-3-record" data-tooltip="Record">
									‚óè
								</button>
								<button class="EH-transport-pronunciation-btn play-recorded" data-audio="transport-pronunciation-3-playback" style="display: none;" data-tooltip="Playback">
									‚ñ∂
								</button>
							</div>
							<div class="EH-transport-recording-status" data-status="transport-pronunciation-3-status"></div>
						</div>
						<!-- Pronunciation 4 -->
						<div class="EH-transport-pronunciation-card">
							<div class="EH-transport-pronunciation-number">4</div>
							<p class="EH-transport-pronunciation-text" data-i18n="transport.pronunciation.p4">"How much is a monthly pass?"</p>
							<div class="EH-transport-pronunciation-controls">
								<button class="EH-transport-pronunciation-btn" data-audio="transport-pronunciation-4-listen" data-tooltip="Listen">
									üîä
								</button>
								<button class="EH-transport-pronunciation-btn record" data-audio="transport-pronunciation-4-record" data-tooltip="Record">
									‚óè
								</button>
								<button class="EH-transport-pronunciation-btn play-recorded" data-audio="transport-pronunciation-4-playback" style="display: none;" data-tooltip="Playback">
									‚ñ∂
								</button>
							</div>
							<div class="EH-transport-recording-status" data-status="transport-pronunciation-4-status"></div>
						</div>
						<!-- Pronunciation 5 -->
						<div class="EH-transport-pronunciation-card">
							<div class="EH-transport-pronunciation-number">5</div>
							<p class="EH-transport-pronunciation-text" data-i18n="transport.pronunciation.p5">"Thank you for your assistance."</p>
							<div class="EH-transport-pronunciation-controls">
								<button class="EH-transport-pronunciation-btn" data-audio="transport-pronunciation-5-listen" data-tooltip="Listen">
									üîä
								</button>
								<button class="EH-transport-pronunciation-btn record" data-audio="transport-pronunciation-5-record" data-tooltip="Record">
									‚óè
								</button>
								<button class="EH-transport-pronunciation-btn play-recorded" data-audio="transport-pronunciation-5-playback" style="display: none;" data-tooltip="Playback">
									‚ñ∂
								</button>
							</div>
							<div class="EH-transport-recording-status" data-status="transport-pronunciation-5-status"></div>
						</div>
					</div>
				</div>
				<!-- Navigation Buttons -->
				<div class="EH-transport-navigation">
					<button class="EH-transport-nav-button back" onclick="window.location.href='Eh-general-reading-adventures.html'">
						‚Üê <span data-i18n="common.backToReadingAdventures">Back to Reading Adventures</span>
					</button>
					<button class="EH-transport-nav-button" onclick="window.location.href='EH-reading-grocery.html'">
						<span data-i18n="common.nextLesson">Next Lesson</span> ‚Üí
					</button>
				</div>
			</div>
		</div>
		<!-- Common Footer -->
		<footer class="EH-common-footer">
			<div class="EH-common-footer-content">
				<div class="EH-common-footer-developer" data-i18n="footer.developer">Developer: Mejri Ziad</div>
				<div class="EH-common-footer-links">
					<a href="#" data-i18n="footer.privacy">Privacy Policy</a>
					<a href="#" data-i18n="footer.terms">Terms of Service</a>
					<a href="#" data-i18n="footer.contact">Contact</a>
				</div>
			</div>
		</footer>
		<!-- i18n translations -->
		<script src="scripts/translations/i18n_en.js"></script>
		<script src="scripts/translations/i18n_fr.js"></script>
		<script src="scripts/translations/i18n_ar.js"></script>
		<script src="scripts/common-i18n.js"></script>
		<!-- Include the generic sound library -->
		<script src="scripts/sound.js"></script>
		<script src="scripts/exercise.js"></script>
		<script>
			// Lesson-specific audio configuration
			const audioConfig = {
				'transport-story': 'assets/audio/lessons/category2/lesson5/transport-story.mp3',
				'transport-pronunciation-1-listen': 'assets/audio/lessons/category2/lesson5/pronunciation-1.mp3',
				'transport-pronunciation-2-listen': 'assets/audio/lessons/category2/lesson5/pronunciation-2.mp3',
				'transport-pronunciation-3-listen': 'assets/audio/lessons/category2/lesson5/pronunciation-3.mp3',
				'transport-pronunciation-4-listen': 'assets/audio/lessons/category2/lesson5/pronunciation-4.mp3',
				'transport-pronunciation-5-listen': 'assets/audio/lessons/category2/lesson5/pronunciation-5.mp3'
			};
			// Correct answers for questions
			const correctAnswers = {
				'EH-exercise-type1-possibilities3-q1': 'a', // Excited and overwhelmed
				'EH-exercise-type1-possibilities3-q2': 'b', // Take the Blue Line and transfer to Green Line
				'EH-exercise-type1-possibilities3-q3': 'c', // Monthly pass
				'EH-exercise-type1-possibilities3-q4': 'b', // Electronic signs with arrival times
				'EH-exercise-type1-possibilities3-q5': 'b'  // Like a local
			};
			// Audio progress tracking
			let progressInterval;
			function updateProgressBar(audioKey) {
				const audio = audioPlayers[audioKey];
				if (!audio) return;
				const progressSlider = document.getElementById('EH-transport-progress');
				const timeDisplay = document.getElementById('EH-transport-time');
				if (audio.duration) {
					const progress = (audio.currentTime / audio.duration) * 100;
					progressSlider.value = progress;
					// Update time display
					const currentTime = formatTime(audio.currentTime);
					const duration = formatTime(audio.duration);
					timeDisplay.textContent = `${currentTime} / ${duration}`;
				}
			}
			function formatTime(seconds) {
				const mins = Math.floor(seconds / 60);
				const secs = Math.floor(seconds % 60);
				return `${mins}:${secs.toString().padStart(2, '0')}`;
			}
			function setupProgressTracking(audioKey) {
				const audio = audioPlayers[audioKey];
				if (!audio) return;
				// Clear any existing interval
				if (progressInterval) {
					clearInterval(progressInterval);
				}
				// Update progress every 100ms
				progressInterval = setInterval(() => {
					updateProgressBar(audioKey);
				}, 100);
				// Setup progress slider event
				const progressSlider = document.getElementById('EH-transport-progress');
				progressSlider.addEventListener('input', function() {
					if (audio.duration) {
						const seekTime = (this.value / 100) * audio.duration;
						audio.currentTime = seekTime;
					}
				});
				// Reset when audio ends
				audio.addEventListener('ended', function() {
					if (progressInterval) {
						clearInterval(progressInterval);
					}
					progressSlider.value = 0;
					document.getElementById('EH-transport-time').textContent = '0:00 / ' + formatTime(audio.duration);
				});
			}
			function setupSpeedControl() {
				const speedSlider = document.getElementById('EH-transport-speed');
				const speedValue = document.getElementById('EH-transport-speed-value');
				speedSlider.addEventListener('input', function() {
					const speed = this.value / 100;
					speedValue.textContent = speed.toFixed(1) + 'x';
					// Apply speed to all audio players
					for (const key in audioPlayers) {
						if (audioPlayers[key]) {
							audioPlayers[key].playbackRate = speed;
						}
					}
				});
			}
			// Initialize when DOM is loaded
			document.addEventListener('DOMContentLoaded', function() {
				// Initialize audio players with lesson-specific config
				initAudioPlayers(audioConfig);
				// Set up main story audio controls
document.getElementById('EH-transport-play-btn').addEventListener('click', function() {
    playAudio('transport-story');
    setupProgressTracking('transport-story');
    // Show pause button, hide play button
    document.getElementById('EH-transport-play-btn').style.display = 'none';
    document.getElementById('EH-transport-pause-btn').style.display = 'flex';
});

document.getElementById('EH-transport-pause-btn').addEventListener('click', function() {
    pauseAudio('transport-story');
    if (progressInterval) {
        clearInterval(progressInterval);
    }
    // Show play button, hide pause button
    document.getElementById('EH-transport-play-btn').style.display = 'flex';
    document.getElementById('EH-transport-pause-btn').style.display = 'none';
});

document.getElementById('EH-transport-stop-btn').addEventListener('click', function() {
    stopAudio('transport-story');
    if (progressInterval) {
        clearInterval(progressInterval);
    }
    document.getElementById('EH-transport-progress').value = 0;
    document.getElementById('EH-transport-time').textContent = '0:00 / 0:00';
    // Show play button, hide pause button
    document.getElementById('EH-transport-play-btn').style.display = 'flex';
    document.getElementById('EH-transport-pause-btn').style.display = 'none';
});
				document.getElementById('EH-transport-volume').addEventListener('input', function() {
					setGlobalVolume(this.value);
				});
				// Setup speed control
				setupSpeedControl();
				// Set up pronunciation practice listeners
				setupPronunciationListeners();
				// Set up answer checking
				ExerciseType1Possibilities3Init(correctAnswers, Object.keys(correctAnswers).length, 'EH-exercise-type1-possibilities3');
				// Initialize with default volume
				setGlobalVolume(80);
			});
		</script>
	</body>
</html>