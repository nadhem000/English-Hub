<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>English Hub - Language Learning Platform</title>
		
		<!-- PWA Meta Tags -->
		<meta name="theme-color" content="#1a2a6c">
		<meta name="description" content="Interactive platform for improving English communication skills through engaging stories and exercises">
		<link rel="manifest" href="manifest.json">
		<link rel="icon" type="image/png" href="assets/icons/icon-192x192.png">
		<link rel="apple-touch-icon" href="assets/icons/icon-192x192.png">
		
		<!-- Common CSS -->
		<link rel="stylesheet" href="styles/common.css">
		
		<style>
			* {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
			}
			
			body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 20px;
			}
			
			/* Main Container */
			.EH-main-container {
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
			}
			
			/* Install Button */
			.EH-install-button {
            position: fixed;
            top: 80px;
            right: 20px;
            background: #4e54c8;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
            z-index: 1001;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            display: none;
			}
			
			.EH-install-button:hover {
            background: #3f46c5;
			}
			
			.EH-install-button.installed {
            background: #11998e;
			}
			
			/* Main Content - Three Sections */
			.EH-main-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
			}
			
			.EH-main-card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 25px;
            padding: 40px 30px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
            transition: transform 0.3s, box-shadow 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 350px;
            cursor: pointer;
			}
			
			.EH-main-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
			}
			
			.EH-main-card.communication {
            background: linear-gradient(135deg, #4e54c8, #8f94fb);
            color: white;
			}
			
			.EH-main-card.writing {
            background: linear-gradient(135deg, #11998e, #38ef7d);
            color: white;
			}
			
			.EH-main-card.conjugation {
            background: linear-gradient(135deg, #fdbb2d, #f46b45);
            color: white;
			}
			
			.EH-main-card-icon {
            font-size: 4rem;
            margin-bottom: 25px;
            display: block;
			}
			
			.EH-main-card-title {
            font-size: 2.2rem;
            margin-bottom: 20px;
            font-weight: bold;
			}
			
			.EH-main-card-description {
            font-size: 1.1rem;
            margin-bottom: 30px;
            line-height: 1.5;
            opacity: 0.9;
			}
			
			.EH-main-card-link {
            display: inline-block;
            background: white;
            color: #333;
            padding: 12px 30px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: bold;
            transition: transform 0.3s, box-shadow 0.3s;
            font-size: 1.1rem;
            margin-top: auto;
			}
			
			.EH-main-card-link:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
			}
			
			/* Coming Soon Badge */
			.EH-coming-soon {
            display: inline-block;
            background: #fdbb2d;
            color: #333;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 0.9rem;
            font-weight: bold;
            margin-top: 10px;
			}
			
			/* Responsive Design */
			@media (max-width: 768px) {
            .EH-main-content {
			grid-template-columns: 1fr;
			gap: 30px;
            }
            
            .EH-main-card {
			min-height: 300px;
			padding: 30px 20px;
            }
            
            .EH-main-card-title {
			font-size: 1.8rem;
            }
            
            .EH-install-button {
			top: 70px;
			right: 15px;
			padding: 8px 12px;
			font-size: 0.9rem;
            }
			}
			
			@media (max-width: 480px) {
            .EH-main-content {
			grid-template-columns: 1fr;
            }
            
            .EH-main-card {
			min-height: 250px;
			padding: 25px 15px;
            }
            
            .EH-main-card-title {
			font-size: 1.6rem;
            }
            
            .EH-main-card-description {
			font-size: 1rem;
            }
			}
		</style>
	</head>
	<body>
		<!-- Language Selector -->
		<div style="position: fixed; top: 20px; right: 20px; z-index: 1000;">
			<select id="language-selector" style="padding: 8px 12px; border-radius: 8px; border: 2px solid #fff; background: rgba(255,255,255,0.9); color: #333; font-weight: bold;">
				<option value="en">English</option>
				<option value="fr">Fran√ßais</option>
				<option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
			</select>
		</div>
		
<div class="EH-site-header">
    <a href="index.html" class="EH-site-logo-link" title="Main Page">
        <img src="assets/icons/icon-192x192.png" alt="English Hub Logo" class="EH-site-logo">
    </a>
    <span class="EH-site-name" data-i18n="common.siteName">English Hub</span>
</div>
		<!-- Install App Button -->
		<button class="EH-install-button" id="install-button">
			üì± Install App
		</button>
		
		<div class="EH-main-container">
			<header class="EH-common-header">
				<h1 class="EH-common-title" data-i18n="main.title">English Hub</h1>
				<p class="EH-common-subtitle" data-i18n="main.subtitle">Your gateway to improving English communication and writing skills</p>
			</header>
			
			<div class="EH-main-content">
				<!-- Communication Skills Section -->
				<div class="EH-main-card communication" onclick="window.location.href='Communication-Skills-Enhancement.html'">
					<span class="EH-main-card-icon">üí¨</span>
					<h2 class="EH-main-card-title" data-i18n="main.communication.title">Communication Skills</h2>
					<p class="EH-main-card-description" data-i18n="main.communication.description">
						Improve your speaking, listening, and pronunciation through interactive lessons, stories, and games.
					</p>
					<a href="Communication-Skills-Enhancement.html" class="EH-main-card-link" data-i18n="main.explore">Explore Now</a>
				</div>
				
				<!-- Writing Skills Section -->
				<div class="EH-main-card writing">
					<span class="EH-main-card-icon">‚úçÔ∏è</span>
					<h2 class="EH-main-card-title" data-i18n="main.writing.title">Writing Skills</h2>
					<p class="EH-main-card-description" data-i18n="main.writing.description">
						Enhance your writing abilities with structured lessons, creative exercises, and practical applications.
					</p>
					<span class="EH-coming-soon" data-i18n="main.comingSoon">Coming Soon</span>
				</div>
				
				<!-- Conjugation Section -->
				<div class="EH-main-card conjugation" onclick="window.location.href='conjugation.html'">
					<span class="EH-main-card-icon">‚è±Ô∏è</span>
					<h2 class="EH-main-card-title" data-i18n="main.conjugation.title">Verb Conjugation</h2>
					<p class="EH-main-card-description" data-i18n="main.conjugation.description">
						Master verb tenses, modals, and modes through interactive exercises and examples.
					</p>
					<a href="conjugation.html" class="EH-main-card-link" data-i18n="main.explore">Explore Now</a>
				</div>
			</div>
		</div>
		
		<footer class="EH-common-footer">
			<div class="EH-common-footer-content">
				<div class="EH-common-footer-developer" data-i18n="footer.developer">Developer: Mejri Ziad</div>
				<div class="EH-common-footer-links">
					<a href="#" data-i18n="footer.privacy">Privacy Policy</a>
					<a href="#" data-i18n="footer.terms">Terms of Service</a>
					<a href="#" data-i18n="footer.contact">Contact</a>
				</div>
			</div>
		</footer>
		
		<!-- i18n translations -->
		<script src="scripts/translations/i18n_en.js"></script>
		<script src="scripts/translations/i18n_fr.js"></script>
		<script src="scripts/translations/i18n_ar.js"></script>
		<script src="scripts/common-i18n.js"></script>
		
		<script>
			// PWA Installation Logic
			let deferredPrompt;
			const installButton = document.getElementById('install-button');
			
			// Check if the app is already installed
			if (window.matchMedia('(display-mode: standalone)').matches || 
            window.navigator.standalone === true) {
				installButton.classList.add('installed');
				installButton.innerHTML = 'üì± Installed';
				installButton.disabled = true;
			}
			
			// Listen for beforeinstallprompt event
			window.addEventListener('beforeinstallprompt', (e) => {
				// Prevent the mini-infobar from appearing on mobile
				e.preventDefault();
				// Stash the event so it can be triggered later
				deferredPrompt = e;
				// Show the install button
				installButton.style.display = 'block';
				
				// Update button text based on language
				updateInstallButtonText();
			});
			
			// Install button click handler
			installButton.addEventListener('click', async () => {
				if (deferredPrompt) {
					// Show the install prompt
					deferredPrompt.prompt();
					// Wait for the user to respond to the prompt
					const { outcome } = await deferredPrompt.userChoice;
					
					if (outcome === 'accepted') {
						installButton.classList.add('installed');
						installButton.innerHTML = 'üì± Installed';
						installButton.disabled = true;
						console.log('User accepted the install prompt');
						} else {
						console.log('User dismissed the install prompt');
					}
					// Clear the saved prompt since it can't be used again
					deferredPrompt = null;
					// Hide the install button
					installButton.style.display = 'none';
				}
			});
			
			// Listen for app installed event
			window.addEventListener('appinstalled', () => {
				// Clear the deferredPrompt so it can be garbage collected
				deferredPrompt = null;
				installButton.classList.add('installed');
				installButton.innerHTML = 'üì± Installed';
				installButton.disabled = true;
				console.log('PWA was installed');
			});
			
			// Update install button text when language changes
			function updateInstallButtonText() {
				const currentLang = getCurrentLanguage();
				const i18n = window.I18N && window.I18N[currentLang];
				
				if (i18n && i18n.common) {
					if (installButton.classList.contains('installed')) {
						installButton.innerHTML = 'üì± ' + (i18n.common.installed || 'Installed');
						} else {
						installButton.innerHTML = 'üì± ' + (i18n.common.install || 'Install App');
					}
				}
			}
			
			// Register service worker
			if ('serviceWorker' in navigator) {
				window.addEventListener('load', () => {
					navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('Service Worker registered: ', registration);
					})
                    .catch((registrationError) => {
                        console.log('Service Worker registration failed: ', registrationError);
					});
				});
			}
			
			function forceServiceWorkerUpdate() {
				if ('serviceWorker' in navigator) {
					navigator.serviceWorker.getRegistrations().then(function(registrations) {
						for(let registration of registrations) {
							registration.update();
						}
					});
					
					// Unregister all service workers and reload
					navigator.serviceWorker.getRegistrations().then(function(registrations) {
						registrations.forEach(function(registration) {
							registration.unregister();
						});
						}).then(function() {
						// Clear all caches
						caches.keys().then(function(cacheNames) {
							cacheNames.forEach(function(cacheName) {
								caches.delete(cacheName);
							});
							}).then(function() {
							console.log('All caches cleared');
							// Reload the page to get fresh content
							window.location.reload(true);
						});
					});
				}
			}
			
			// Add a hidden button for developers to force cache clear
			document.addEventListener('DOMContentLoaded', function() {
				const clearCacheBtn = document.createElement('button');
				clearCacheBtn.textContent = 'üîÑ Clear Cache';
				clearCacheBtn.style.position = 'fixed';
				clearCacheBtn.style.bottom = '20px';
				clearCacheBtn.style.left = '20px';
				clearCacheBtn.style.zIndex = '10000';
				clearCacheBtn.style.padding = '10px';
				clearCacheBtn.style.background = '#ff4444';
				clearCacheBtn.style.color = 'white';
				clearCacheBtn.style.border = 'none';
				clearCacheBtn.style.borderRadius = '5px';
				clearCacheBtn.style.cursor = 'pointer';
				clearCacheBtn.addEventListener('click', forceServiceWorkerUpdate);
				document.body.appendChild(clearCacheBtn);
			});
			// Add translations for the main page
			document.addEventListener('DOMContentLoaded', function() {
				// Ensure our main page translations are added to the existing translation files
				const addMainPageTranslations = function() {
					// Add main page translations to each language
					for (const lang in window.I18N) {
						if (window.I18N.hasOwnProperty(lang)) {
							window.I18N[lang].main = {
								title: window.I18N[lang].main?.title || "English Hub",
								subtitle: window.I18N[lang].main?.subtitle || "Your gateway to improving English communication and writing skills",
								communication: {
									title: window.I18N[lang].main?.communication?.title || "Communication Skills",
									description: window.I18N[lang].main?.communication?.description || "Improve your speaking, listening, and pronunciation through interactive lessons, stories, and games."
								},
								writing: {
									title: window.I18N[lang].main?.writing?.title || "Writing Skills",
									description: window.I18N[lang].main?.writing?.description || "Enhance your writing abilities with structured lessons, creative exercises, and practical applications."
								},
								conjugation: {
									title: window.I18N[lang].main?.conjugation?.title || "Verb Conjugation",
									description: window.I18N[lang].main?.conjugation?.description || "Master verb tenses, modals, and modes through interactive exercises and examples."
								},
								explore: window.I18N[lang].main?.explore || "Explore Now",
								comingSoon: window.I18N[lang].main?.comingSoon || "Coming Soon"
							};
							
							// Add install button translations
							window.I18N[lang].common = window.I18N[lang].common || {};
							window.I18N[lang].common.install = window.I18N[lang].common.install || "Install App";
							window.I18N[lang].common.installed = window.I18N[lang].common.installed || "Installed";
						}
					}
				};
				
				// Call the function to add translations
				addMainPageTranslations();
				
				// Update install button when language changes
				window.addEventListener('languageChanged', updateInstallButtonText);
			});
		</script>
	</body>
</html>
